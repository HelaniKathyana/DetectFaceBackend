from django.http import HttpResponse
from . import hybridLocation
from django.http import JsonResponse
from rest_framework.decorators import api_view
import os
import json
import numpy as np


@api_view(['GET'])
def index(request):
    response = hybridLocation.selectModel()
    return JsonResponse({'data': response[0], 'latent_codes': response[1]})


@api_view(['POST'])
def edit(request):
    latent_code = eval(request.POST.get('code'))
    # latent_code = [[0.42613402009010315, 0.17528608441352844, -0.1358887404203415, 0.24121177196502686, 0.01117929257452488, 0.36261552572250366, 0.09133031219244003, 0.07356014847755432, -0.07797645032405853, -0.07014095783233643, 0.12013348937034607, -0.06726577132940292, 0.3485587239265442, 0.277386337518692, -0.004351174924522638, 0.024839073419570923, -0.06881313025951385, 0.09207387268543243, -0.03857828676700592, -0.09450133889913559, 0.6701207160949707, 0.32230064272880554, -0.10946295410394669, -0.04086789861321449, 0.25014933943748474, -0.06361217051744461, -0.0013091982109472156, -0.047291506081819534, 0.26691189408302307, -0.052028607577085495, -0.06927847862243652, 0.308811753988266, -0.19373831152915955, -0.11743676662445068, -0.01829606667160988, -0.19206522405147552, -0.0024721373338252306, -0.15667574107646942, -0.01992085389792919, -0.13084623217582703, 0.036893606185913086, -0.08639473468065262, -0.12470702081918716, -0.032123614102602005, -0.09993085265159607, -0.09719328582286835, -0.02160521410405636, -0.10840392112731934, 0.5537077188491821, -0.06757859885692596, -0.13550829887390137, -0.08009923994541168, -0.11884815990924835, -0.013585555367171764, -0.06438469141721725, -0.050499022006988525, -0.08550015091896057, 0.21744108200073242, 0.19818492233753204, -0.18419305980205536, -0.2530076503753662, 0.11635328829288483, -0.03373055160045624, -0.09643539786338806, 0.19636043906211853, -0.041539717465639114, -0.0972486138343811, -0.047566261142492294, -0.009091941639780998, -0.003819134784862399, 0.0023172730579972267, 0.0005369521677494049, -0.08799965679645538, -0.15560297667980194, -0.023334288969635963, -0.12056151777505875, -0.17000743746757507, 0.09622547775506973, -0.04803277924656868, 0.15152190625667572, -0.02572757937014103, -0.09983737766742706, -0.03942841663956642, -0.051434196531772614, 0.316895067691803, -0.18702250719070435, -0.03268752619624138, 0.11411592364311218, -0.019291449338197708, 0.08202353119850159, -0.1079784408211708, 0.07217961549758911, -0.14526456594467163, -0.05520927906036377, -0.029019951820373535, -0.023823469877243042, -0.09972492605447769, -0.06550928205251694, 0.04197476804256439, -0.0447189100086689, -0.13062958419322968, -0.017157478258013725, -0.09391819685697556, -0.17151610553264618, -0.14300349354743958, -0.13861289620399475, -0.07375103235244751, -0.03010479547083378, -0.10493852943181992, -0.0528627410531044, -0.04179961606860161, -0.1578560769557953, -0.04427633807063103, -0.11501506716012955, -0.1311333179473877, -0.017498338595032692, -0.044221390038728714, -0.10556179285049438, -0.09254162758588791, 0.08137320727109909, -0.10700845718383789, -0.24824069440364838, -0.03151952102780342, -0.08837094157934189, -0.11282607167959213, -0.030133038759231567, 0.34829506278038025, 0.4240667521953583, -0.009745950810611248, -0.11759140342473984, -0.03773247450590134, -0.039228957146406174, 0.14786390960216522, -0.02227153442800045, -0.12581844627857208, 0.2512984275817871, -0.169056236743927, -0.05759638175368309, 0.021421663463115692, -0.12040084600448608, -0.03588806465268135, 0.4214080572128296, -0.08101826161146164, -0.06449899077415466, 0.07581555843353271, 0.5653892159461975, -0.20787875354290009, -0.07135068625211716, -0.10247254371643066, -0.10641667991876602, 0.368823766708374, -0.20235303044319153, -0.0016764100873842835, -0.1907394975423813, -0.0605853796005249, 0.4178699553012848, -0.10338194668292999, 0.5806678533554077, 0.3292675018310547, -0.08710076659917831, 0.10688906162977219, -0.1667851060628891, -0.11372070759534836, 0.2262500673532486, -0.052959125488996506, -0.08042581379413605, -0.013308591209352016, -0.25327613949775696, -0.14407458901405334, -0.01186221744865179, -0.05036304146051407, -0.008276133798062801, 0.3122471570968628, -0.07540520280599594, 0.21520476043224335, 0.41294538974761963, -0.03483356535434723, -0.025159433484077454, -0.022289134562015533, -0.13292346894741058, -0.0032485828269273043, -0.10666894912719727, 0.005925528239458799, -0.05658049136400223, -0.05312422662973404, 0.06763218343257904, -0.18272332847118378, -0.01311049610376358, -0.06714743375778198, 0.20775875449180603, -0.09067261964082718, -0.006717178504914045, 0.9418947696685791, -0.12993600964546204, 0.18476925790309906, 0.2283346801996231, 0.4740593731403351, -0.027793778106570244, -0.13100937008857727, 0.37043625116348267, 0.22977060079574585, -0.02466455101966858, 0.16555973887443542, -0.052445899695158005, 0.4048144817352295, 0.055388595908880234, -0.02941964566707611, 0.06495442986488342, -0.1548445075750351, -0.15516141057014465, 0.049872931092977524, 0.10781727731227875, -0.035930126905441284, -0.1897525042295456, -0.06608879566192627, 0.12509597837924957, -0.08495678752660751, 0.4098990261554718, -0.022975031286478043, -0.08433138579130173, 0.7741156220436096, -0.02723279595375061, -0.12121695280075073, -0.00013801195018459111, 0.006854299455881119, -0.20385897159576416, -0.06117160990834236, -0.09258594363927841, -0.0827690064907074, 0.34895747900009155, -0.07295321673154831, 0.45566630363464355, -0.05646362900733948, -0.061157263815402985, -0.047305550426244736, -0.19968874752521515, -0.1821805089712143, -0.1439741998910904, -0.150698721408844, -0.12038774788379669, -0.20631590485572815, -0.08291635662317276, 0.14512589573860168, -0.026411045342683792, 0.21878039836883545, -0.09973142296075821, -0.11588241904973984, -0.19894692301750183, -0.07932407408952713, -0.15593598783016205, -0.15653552114963531, -0.0471404567360878, -0.07214539498090744, -0.14566396176815033, -0.011876741424202919, -0.08130481839179993, -0.2696804702281952, -0.08000229299068451, 0.1419045329093933, -0.14092710614204407, -0.18847721815109253, -0.02242758683860302, -0.14150872826576233, -0.1013530045747757, -0.0687604621052742, -0.024143781512975693, 0.0544273778796196, -0.10439880192279816, -0.20197851955890656, 0.43091028928756714, -0.0423583984375, -0.1275338977575302, -0.14880119264125824, -0.04574417695403099, -0.19011801481246948, -0.0664069876074791, 0.017328917980194092, -0.0015247196424752474, -0.026176709681749344, -0.06613781303167343, -0.08230080455541611, -0.13787119090557098, -0.07620193064212799, 0.18913331627845764, 0.41528403759002686, 0.15854129195213318, -0.08061013370752335, 0.4393436312675476, -0.00573676498606801, 0.11115874350070953, -0.2239561825990677, 0.13969862461090088, -0.03635558485984802, -0.12242233753204346, 0.37438055872917175, -0.0040808566845953465, -0.1301274597644806, 0.09735359251499176, -0.027974912896752357, -0.11557137221097946, -0.10289254039525986, -0.08853328227996826, -0.059519149363040924, -0.1311689168214798, 0.14837387204170227, 0.1706967055797577, -0.06916989386081696, -0.10762452334165573, -0.052315711975097656, 0.30221185088157654, -0.020574500784277916, -0.003436482045799494, -0.10474809259176254, -0.09043305367231369, -0.0017105389852076769, -0.1919235736131668, -0.03762715682387352, -0.09362928569316864, -0.2125352919101715, -0.05504119023680687, -0.09077464789152145, -0.09744221717119217, -0.2078378051519394, 0.22743313014507294, -0.039822258055210114, 0.21301506459712982, -0.2194432020187378, 0.17023950815200806, -0.053131282329559326, -0.06744526326656342, -0.006343004293739796, -0.11424437910318375, 0.2009432315826416, -0.09668692201375961, -0.11963512003421783, -0.23833806812763214, -0.03561657667160034, 0.3223419785499573, 0.005342543125152588, -0.11577731370925903, -0.0015922532184049487, 0.25935155153274536, -0.09354355186223984, -0.02590784803032875, -0.08795493096113205, -0.0933164581656456, -0.03863434121012688, -0.10134653002023697, -0.04837743565440178, -0.09358389675617218, -0.16114236414432526, 0.8963806629180908, -0.017869174480438232, 0.5198922157287598, -0.10281910747289658, -0.09883502125740051, -0.15163235366344452, -0.1520044058561325, -0.06740491837263107, 0.1506907045841217, 0.3280244767665863, -0.05878853425383568, -0.031054750084877014, -0.08054220676422119, 0.2645297348499298, -0.2034570723772049, -0.11776752769947052, -0.07083072513341904, 0.018924547359347343, 0.14367704093456268, -0.01518416590988636, -0.04020705446600914, -0.02452211268246174, 0.06670462340116501, -0.12434015423059464, 0.6808011531829834, -0.14116136729717255, 0.2063462883234024, -0.023236731067299843, 0.3496416211128235, -0.008832906372845173, -0.08205416053533554, -0.08794176578521729, -0.01692095212638378, -0.03800899535417557, -0.09623122215270996, -0.10908104479312897, -0.1253228634595871, 0.2179611176252365, -0.12222319096326828, 0.1760866940021515, -0.15608400106430054, -0.10244083404541016, 0.15388070046901703, -0.05343877896666527, -0.06913766264915466, 0.1077612042427063, -0.07526315748691559, -0.10197340697050095, -0.12773819267749786, -0.004824887495487928, -0.02970161847770214, -0.10264521092176437, -0.045254167169332504, -0.06687031686306, 0.11627517640590668, -0.00968546885997057, 0.026597384363412857, 0.14671452343463898, 0.4342539310455322, -0.08616086840629578, -0.07263527065515518, -0.13075189292430878, 0.027353037148714066, -0.06549008190631866, 0.21599216759204865, -0.14017045497894287, -0.11176061630249023, -0.07283550500869751, 0.5413419604301453, -0.09601899981498718, -0.05760011821985245, -0.036774761974811554, -0.10962505638599396, -0.05759793147444725, 0.23528237640857697, 0.9876658320426941, -0.06522692739963531, -0.027972150593996048, -0.05247104912996292, -0.03407854959368706, 0.45851507782936096, 0.39276644587516785, -0.054738737642765045, -0.05493425205349922, 0.2769601345062256, 0.31736400723457336, -0.06106601282954216, -0.07297825068235397, -0.15427745878696442, 0.022849224507808685, -0.1299877017736435, -0.17004184424877167, -0.19666846096515656, -0.10466010868549347, -0.24380533397197723, -0.05626380071043968, -0.14180263876914978, -0.01666351966559887, -0.046399567276239395, -0.17224489152431488, -0.043274085968732834, -0.04786808416247368, -0.058850206434726715, 0.12066437304019928, -0.006277091335505247, 1.0065093040466309, -0.010101093910634518, -0.07465030252933502, -0.04413622245192528, -0.13044191896915436, 0.27292391657829285, -0.0757632628083229, -0.06516819447278976, -0.1627778261899948, -0.017377380281686783, 0.7416589260101318, 0.10945366322994232, -0.15019629895687103, 0.10625806450843811, -0.08099193871021271, -0.011650389060378075, 0.005606591701507568, 0.6711499691009521, -0.09016703814268112, -0.07971286028623581, -0.20010285079479218, -0.122658871114254, -0.06323055177927017, -0.0468030646443367, -0.09241467714309692, -0.11185000091791153, -0.02606070041656494, -0.11586747318506241, 0.19104398787021637, -0.010211511515080929, -0.03805914521217346, -0.024710197001695633, -0.036887358874082565, -0.08209624141454697, -0.15586823225021362, 0.1757279634475708, -0.0843280553817749, 0.3875367343425751, -0.11718977987766266, -0.05042652413249016, -0.09029906243085861, -0.055580269545316696, 0.3726499676704407, -0.17412106692790985, -0.08828774094581604, -0.1669590324163437, -0.2845701277256012, -0.03017306886613369, 0.08382632583379745, -0.012672903016209602, -0.01295852568000555, -0.1693732887506485, -0.06822840869426727, -0.05035760626196861, -0.06393633037805557, 0.01592586748301983]]
    latent_code = np.array(latent_code)
    name = hybridLocation.edit_image(latent_code)
    return JsonResponse({'img_name': name})
